<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Quero Ajudar ‚Äî Amigo Pet</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

  <!-- QRCode lib -->
  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>

  <style>
    /* ---------- Seu estilo existente (preservado e ajustado) ---------- */
    body {
      background: linear-gradient(to right, #fceabb, #f8b500);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      padding-top: 88px; /* espa√ßo para navbar fixa */
    }

    .navbar {
      background-color: #ffffffcc !important;
      backdrop-filter: blur(8px);
    }

    .section-title {
      font-weight: 700;
      color: #ff6600;
      text-shadow: 1px 1px 5px #fff;
    }

    .card {
      border-radius: 1rem;
      background: #fff4e0;
      transition: transform 0.3s, box-shadow 0.3s;
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 25px rgba(0,0,0,0.2);
    }

    .btn-primary, .btn-outline-primary {
      border-radius: 50px;
      transition: transform 0.2s;
    }

    .btn-primary:hover, .btn-outline-primary:hover {
      transform: scale(1.05);
    }

    footer {
      background-color: #ffefdb;
    }

    #volunteerForm input, #volunteerForm select {
      border-radius: 10px;
      border: 1px solid #ff9900;
      padding: 10px;
    }

    #formMessage {
      margin-top: 10px;
    }

    .qrcode-container {
      display: flex;
      justify-content: center;
      margin-top: 20px;
    }

    /* ---------- Modal: visibilidade via opacity + pointer-events ---------- */
    .modal-overlay {
      position: fixed;
      inset: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(3px);
      opacity: 0;
      pointer-events: none;
      z-index: 9999;
      transition: opacity 0.25s ease;
    }

    /* classe que "mostra" o modal */
    .modal-overlay.mostrar {
      opacity: 1;
      pointer-events: all;
    }

    .login-card {
      background: #fff;
      border-radius: 16px;
      padding: 25px 22px;
      width: 90%;
      max-width: 420px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.25);
      text-align: center;
      position: relative;
      animation: fadeIn 0.25s ease;
    }

    .close {
      position: absolute;
      top: 10px;
      right: 15px;
      font-size: 26px;
      color: #888;
      cursor: pointer;
      border: none;
      background: transparent;
    }

    .login-title {
      font-weight: 600;
      color: #555;
      margin-bottom: 12px;
    }

    .login-input {
      width: 100%;
      padding: 12px 14px;
      margin: 8px 0;
      border: 1px solid #ccc;
      border-radius: 8px;
    }

    .btn-login {
      width: 100%;
      padding: 12px;
      background-color: #3949ab;
      color: white;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      margin-top: 10px;
      cursor: pointer;
    }

    .btn-secondary,
    .btn-create {
      width: 100%;
      padding: 12px;
      border: none;
      border-radius: 8px;
      margin-top: 8px;
      cursor: pointer;
    }

    .btn-secondary { background: #e0e0e0; }
    .btn-create { background: #e91e63; color: #fff; }

    .divider { margin: 16px 0; color: #666; font-weight: bold; }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-14px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Responsividade pequena: reduz padding do card */
    @media (max-width: 420px) {
      .login-card { padding: 20px; }
      .login-title { font-size: 1.05rem; }
    }
  </style>
</head>
<body>

  <!-- NAVBAR -->
  <nav class="navbar fixed-top navbar-expand-lg navbar-light bg-light shadow-sm py-3">
    <div class="container-fluid">
      <a class="navbar-brand d-flex align-items-center me-4" href="#">
        <img src="images/logadocaopet.png" alt="Logo" height="50" class="me-2 rounded-circle">
        <span class="fw-bold fs-4 text-primary">Amigo Pet</span>
      </a>

      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav align-items-center gap-2 me-auto">
          <li class="nav-item">
            <a class="nav-link fs-5 text-dark hover-effect" href="index.html">
              <i class="bi bi-house-door-fill text-primary me-1"></i>P√°gina Inicial
            </a>
          </li>
          
          <li class="nav-item">
            <a class="nav-link fs-5 text-dark hover-effect" href="quer-ajudar.html">
              <i class="bi bi-hand-thumbs-up-fill text-success me-1"></i>Quero ajudar
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link fs-5 text-dark hover-effect" href="identidadepet.html">
              <i class="bi bi-person-badge text-warning me-1"></i>Criar RG do Pet
            </a>
          </li>
        </ul>

        <div class="d-flex gap-2">
          <a href="#" id="abrirLogin" class="btn btn-primary rounded-pill px-4 py-2 fw-semibold">Entrar</a>
          <a class="btn btn-primary rounded-pill px-4 py-2 fw-semibold" href="register.html">
            <i class="bi bi-person-plus-fill me-1"></i>Cadastre-se
          </a>
        </div>
      </div>
    </div>
  </nav>

  <!-- Modal flutuante (overlay) -->
  <div id="loginModal" class="modal-overlay" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="login-card" role="document">
      <button id="fecharLogin" class="close" aria-label="Fechar">&times;</button>

      <!-- LOGIN -->
      <div id="loginSection">
        <h3 class="login-title">Fa√ßa seu Login</h3>
        <input type="email" id="loginEmail" class="login-input" placeholder="Email" autocomplete="username">
        <input type="password" id="loginPassword" class="login-input" placeholder="Senha" autocomplete="current-password">

        <button id="btnLoginModal" class="btn-login">Acessar minha conta</button>
        <button id="btnForgotPassword" class="btn-secondary">Esqueci senha</button>

        <div class="divider">OU</div>
        <a href="register.html" class="btn-create" id="btnCadastrar">Cadastrar uma conta</a>
      </div>

      <!-- ESQUECI SENHA -->
      <div id="forgotSection" style="display:none;">
        <h3 class="login-title">Recuperar Senha</h3>
        <input type="email" id="forgotEmail" class="login-input" placeholder="Digite seu e-mail">
        <button id="btnEnviarReset" class="btn-login">Enviar link de redefini√ß√£o</button>
        <button id="btnVoltarLogin" class="btn-secondary">Voltar ao Login</button>
        <div id="messageForgot" class="mt-2"></div>
      </div>

      <!-- REDEFINIR SENHA -->
      <div id="resetSection" style="display:none;">
        <h3 class="login-title">Redefinir Senha</h3>
        <input type="password" id="newPassword" class="login-input" placeholder="Nova senha">
        <button id="btnRedefinir" class="btn-login">Redefinir</button>
        <button id="btnVoltarLogin2" class="btn-secondary">Voltar ao Login</button>
        <div id="messageReset" class="mt-2"></div>
      </div>
    </div>
  </div>

  <!-- Conte√∫do principal (exemplo resumido) -->
  <div class="container my-5">
    <h1 class="text-center section-title mb-4">Quem Somos üêæ</h1>

    <div class="row justify-content-center">
      <div class="col-md-8">
        <div class="ratio ratio-16x9">
          <iframe width="560" height="315" src="https://www.youtube.com/embed/bLta5qX6hL8?si=SZIBO0kwCEah17Zm" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
        </div>
      </div>
    </div>
  </div>

  <div class="container my-5">
  <h1 class="text-center section-title mb-4">Sobre N√≥s üêæ</h1>

  <div class="row justify-content-center">
    <div class="col-md-10">
      <div class="card shadow-sm p-4 bg-light">
        <p>
          Nosso projeto nasceu em <strong>2024</strong>, a partir de uma aula de <em>idea√ß√£o</em>, onde o desafio era criar um projeto social com impacto real.
        </p>
        <p>
          Ao observar a nossa cidade, percebemos um problema evidente: o abandono de animais. Mesmo sendo uma cidade pequena, o n√∫mero de pets sem lar era grande ‚Äî e pior ainda, n√£o havia campanhas de <strong>castra√ß√£o</strong>, <strong>registro (RG animal)</strong> ou <strong>acompanhamento veterin√°rio gratuito</strong>.
        </p>
        <p>
          Diante disso, surgiu a ideia de criar uma iniciativa que conectasse <strong>pessoas dispostas a adotar</strong> com <strong>animais que precisam de um lar</strong>. Um espa√ßo que tamb√©m sirva para informar, educar e mobilizar a comunidade em torno do cuidado e da responsabilidade com os pets.
        </p>
        <p>
          Agora, durante o <strong>Projeto Integrador</strong> em <strong>2025</strong>, estamos tirando essa ideia do papel. Queremos come√ßar pequeno, com seriedade e prop√≥sito, para que no futuro possamos nos tornar um <strong>grande projeto social</strong>, capaz de transformar vidas ‚Äî tanto humanas quanto animais.
        </p>
        <p>
          Esperamos contar com <strong>volunt√°rios</strong>, <strong>parceiros</strong> e <strong>doa√ß√µes</strong> para continuar crescendo. Acreditamos que, juntos, podemos construir um futuro mais digno para os nossos companheiros de quatro patas.
        </p>
      </div>
    </div>
  </div>
</div>

  <!-- Rodap√© resumido -->
  <footer class="footer pt-5 pb-4 mt-5 border-top shadow-sm">
    <div class="container text-center text-md-start">
      <div class="row">
        <div class="col-md-4 mb-4">
          <h5 class="fw-bold mb-3">
            <img src="images/logadocaopet.png" height="40" alt="Logo" class="me-2 rounded-circle"> Amigo Pet
          </h5>
          <p class="text-muted">Cuidando de vidas com amor e responsabilidade.</p>
        </div>
        <div class="col-md-4 mb-4">
          <h5 class="fw-bold mb-3">Fale Conosco</h5>
          <p><i class="bi bi-envelope-fill me-2"></i> amigopet37@gmail.com</p>
          <p><i class="bi bi-geo-alt-fill me-2"></i> Jaguaruana-Ce</p>
          <p><i class="bi bi-phone-fill me-2"></i> (88) 99307-0295</p>
        </div>
      </div>

      <hr>
      <div class="text-center small text-muted">¬© 2025 Amigo Pet. Todos os direitos reservados.</div>
    </div>
  </footer>

  <!-- Seu script externo pode ser chamado aqui; abaixo est√° o script corrigido e completo -->
  <script>
    // Coloque todo o c√≥digo dentro do DOMContentLoaded para garantir que os elementos existam
    document.addEventListener('DOMContentLoaded', () => {

      /* --------- Modal: elementos e navega√ß√£o interna --------- */
      const loginModal = document.getElementById('loginModal');
      const btnAbrirLogin = document.getElementById('abrirLogin');
      const fecharLogin = document.getElementById('fecharLogin');

      const loginSection = document.getElementById('loginSection');
      const forgotSection = document.getElementById('forgotSection');
      const resetSection = document.getElementById('resetSection');

      const btnLoginModal = document.getElementById('btnLoginModal');
      const btnForgotPassword = document.getElementById('btnForgotPassword');
      const btnVoltarLogin = document.getElementById('btnVoltarLogin');
      const btnVoltarLogin2 = document.getElementById('btnVoltarLogin2');
      const btnEnviarReset = document.getElementById('btnEnviarReset');
      const btnRedefinir = document.getElementById('btnRedefinir');

      function showSection(section) {
        loginSection.style.display = 'none';
        forgotSection.style.display = 'none';
        resetSection.style.display = 'none';

        if (section === 'login') loginSection.style.display = 'block';
        if (section === 'forgot') forgotSection.style.display = 'block';
        if (section === 'reset') resetSection.style.display = 'block';
      }

      // Abre o modal
      if (btnAbrirLogin) {
        btnAbrirLogin.addEventListener('click', (e) => {
          e.preventDefault();
          loginModal.classList.add('mostrar');
          loginModal.setAttribute('aria-hidden', 'false');
          showSection('login');
          // foco para acessibilidade
          const first = loginModal.querySelector('input');
          if (first) first.focus();
        });
      }

      // Fecha o modal pelo bot√£o
      if (fecharLogin) {
        fecharLogin.addEventListener('click', () => {
          loginModal.classList.remove('mostrar');
          loginModal.setAttribute('aria-hidden', 'true');
        });
      }

      // Fecha clicando fora do card (overlay)
      window.addEventListener('click', (event) => {
        if (event.target === loginModal) {
          loginModal.classList.remove('mostrar');
          loginModal.setAttribute('aria-hidden', 'true');
        }
      });

      // Fecha com ESC
      window.addEventListener('keydown', (event) => {
        if (event.key === 'Escape') {
          if (loginModal.classList.contains('mostrar')) {
            loginModal.classList.remove('mostrar');
            loginModal.setAttribute('aria-hidden', 'true');
          }
        }
      });

      // Navega√ß√£o entre telas
      if (btnForgotPassword) btnForgotPassword.addEventListener('click', () => showSection('forgot'));
      if (btnVoltarLogin) btnVoltarLogin.addEventListener('click', () => showSection('login'));
      if (btnVoltarLogin2) btnVoltarLogin2.addEventListener('click', () => showSection('login'));

      /* --------- Login (exemplo: envia para sua API) --------- */
      if (btnLoginModal) {
        btnLoginModal.addEventListener('click', async () => {
          const email = document.getElementById('loginEmail').value.trim();
          const password = document.getElementById('loginPassword').value.trim();

          if (!email || !password) {
            alert('Preencha todos os campos!');
            return;
          }

          try {
            const response = await fetch('https://amigopet.onrender.com/user/login', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({ email, password })
            });

            const data = await response.json();

            if (response.ok) {
              localStorage.setItem('token', data.token);
              alert('Login realizado com sucesso!');
              loginModal.classList.remove('mostrar');
              loginModal.setAttribute('aria-hidden', 'true');
              // redireciona
              window.location.href = "index.html";
            } else {
              alert(data.error || 'Erro ao fazer login.');
            }
          } catch (error) {
            console.error(error);
            alert('N√£o foi poss√≠vel conectar ao servidor.');
          }
        });
      }

      /* --------- Esqueci senha: enviar link --------- */
      if (btnEnviarReset) {
        btnEnviarReset.addEventListener('click', async () => {
          const email = document.getElementById('forgotEmail').value.trim();
          const msg = document.getElementById('messageForgot');

          if (!email) {
            alert('Digite seu e-mail.');
            return;
          }

          try {
            const res = await fetch('https://amigopet.onrender.com/request-reset', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({ email })
            });

            const data = await res.json();

            if (res.ok) {
              msg.innerHTML = `<div style="color:green;">${data.message}</div>`;
            } else {
              msg.innerHTML = `<div style="color:red;">${data.error || 'Erro ao enviar e-mail.'}</div>`;
            }
          } catch (err) {
            console.error(err);
            msg.innerHTML = `<div style="color:red;">Erro de conex√£o.</div>`;
          }
        });
      }

      /* --------- Redefinir senha (token via querystring) --------- */
      if (btnRedefinir) {
        btnRedefinir.addEventListener('click', async () => {
          const newPassword = document.getElementById('newPassword').value.trim();
          const msg = document.getElementById('messageReset');
          const params = new URLSearchParams(window.location.search);
          const token = params.get('token');

          if (!token || !newPassword) {
            msg.innerHTML = `<div style="color:red;">Token ou senha inv√°lida.</div>`;
            return;
          }

          try {
            const res = await fetch('https://amigopet.onrender.com/reset-password', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({ token, newPassword })
            });

            const data = await res.json();

            if (res.ok) {
              msg.innerHTML = `<div style="color:green;">${data.message}</div>`;
              document.getElementById('newPassword').value = '';
            } else {
              msg.innerHTML = `<div style="color:red;">${data.error || 'Erro na redefini√ß√£o.'}</div>`;
            }
          } catch (err) {
            console.error(err);
            msg.innerHTML = `<div style="color:red;">Erro ao redefinir a senha.</div>`;
          }
        });
      }

      /* --------- (Opcional) Gera√ß√£o de QR Code Pix para elemento com id "qrcode" --------- */
      const qrcodeEl = document.getElementById('qrcode');
      if (qrcodeEl && typeof QRCode !== 'undefined') {
        const qrCodeData = '00020126360014BR.GOV.BCB.PIX0111889930702955204000053039865802BR5920Ajuda Animal6009Fortaleza62070503***6304E4F5';
        // toCanvas pode falhar se elemento n√£o for canvas; aqui garantimos que exista
        try {
          QRCode.toCanvas(qrcodeEl, qrCodeData, function (error) {
            if (error) console.error('QRCode error:', error);
          });
        } catch (err) {
          console.error('QRCode render error:', err);
        }
      }

      /* --------- Se voc√™ tiver um formul√°rio #volunteerForm no site, mantenho o handler aqui --------- */
      const volunteerForm = document.getElementById('volunteerForm');
      if (volunteerForm) {
        volunteerForm.addEventListener('submit', async function (e) {
          e.preventDefault();
          const name = document.getElementById('name').value;
          const email = document.getElementById('email').value;
          const role = document.getElementById('role').value;
          const formMessage = document.getElementById('formMessage');

          try {
            const res = await fetch('https://amigopet.onrender.com/register', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({ name, email, role })
            });

            const data = await res.json();
            if (res.ok) {
              formMessage.innerHTML = `<div class="alert alert-success">Obrigado por se cadastrar! üêæ</div>`;
              volunteerForm.reset();
            } else {
              formMessage.innerHTML = `<div class="alert alert-danger">${data.error || 'Erro no cadastro.'}</div>`;
            }
          } catch (err) {
            console.error(err);
            formMessage.innerHTML = `<div class="alert alert-danger">Erro ao enviar formul√°rio.</div>`;
          }
        });
      }
    }); // fim DOMContentLoaded
  </script>

  <!-- Bootstrap Bundle (coloca no final para performance) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
